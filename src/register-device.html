<script type="text/html" data-template-name="register-device">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-server">Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-device_id">Device ID</label>
        <input type="text" id="node-input-device_id">
    </div>
    <div class="form-row">
        <label for="node-input-device_name">Device Name</label>
        <input type="text" id="node-input-device_name">
    </div>
    <div class="form-row">
        <label for="node-input-category">Category</label>
        <select name="node-input-category" id="node-input-category" style="width: 70%;"></select>
    </div>
    <div class="form-row">
        <label for="node-input-capabilities">Capabilities</label>
        <select name="node-input-capabilities" id="node-input-capabilities" style="width: 70%;"></select>
    </div>
    <div class="form-row">
        <label for="node-input-manufacturer">Manufacturer</label>
        <input type="text" id="node-input-manufacturer">
    </div>
    <div class="form-row">
        <label for="node-input-model">Model</label>
        <input type="text" id="node-input-model">
    </div>
    <div class="form-row">
        <label for="node-input-firmware_version">FW version</label>
        <input type="text" id="node-input-firmware_version">
    </div>
    <div class="form-row">
        <label for="node-input-service_address">Service IP</label>
        <input type="text" id="node-input-service_address">
    </div>
    <div class="form-row">
        <label for="node-input-tags">Tags</label>
        <input type="text" id="node-input-tags" style="width: 70%;">
    </div>
    <div class="form-row">
        <label for="node-input-state">State</label>
        <input type="text" id="node-input-state" style="width: 70%;">
    </div>
</script>

<script type="text/javascript">
;(function () {
    const DOM_ID_INPUT_TAGS = '#node-input-tags';
    const DOM_ID_INPUT_STATE = '#node-input-state';

    RED.nodes.registerType('register-device', {
        category: 'eWeLink Cube',
        color: '#4697ff',
        defaults: {
            name: {
                value: '',
            },
            server: {
                value: '',
                required: true,
                type: 'api-server',
            },
            device_id: {
                value: '',
                required: true
            },
            device_name: {
                value: '',
                required: true
            },
            category: {
                value: '',
                required: true
            },
            capabilities: {
                value: '',
                required: true
            },
            manufacturer: {
                value: '',
                required: true
            },
            model: {
                value: '',
                required: true
            },
            firmware_version: {
                value: '',
                required: true
            },
            service_address: {
                value: '',
                required: true
            },
            tags: {
                value: '',
                required: true
            },
            state: {
                value: '',
                required: true
            }
        },
        inputs: 1,
        outputs: 1,
        icon: 'serial.svg',
        label() {
            return this.name || 'register-device';
        },
        paletteLabel: 'register device',
        oneditprepare() {
            $(DOM_ID_INPUT_TAGS).typedInput({
                type: 'json',
                types: ['json']
            });

            $(DOM_ID_INPUT_STATE).typedInput({
                type: 'json',
                types: ['json']
            });
        }
    });
})();

</script>
